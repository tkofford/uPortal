<?xml version="1.0" encoding="UTF-8"?>
<!--

    Licensed to Jasig under one or more contributor license
    agreements. See the NOTICE file distributed with this work
    for additional information regarding copyright ownership.
    Jasig licenses this file to you under the Apache License,
    Version 2.0 (the "License"); you may not use this file
    except in compliance with the License. You may obtain a
    copy of the License at:

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on
    an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied. See the License for the
    specific language governing permissions and limitations
    under the License.

-->

<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd" updateCheck="false" name="uPortal.cacheManager">
     
    <!--
     | General direct-access portal caches are in the first section
     | Hibernate entity caches are in the second section
     | Portal Event Hibernate caches are in the third section
     |
     | Please see http://ehcache.sourceforge.net/documentation/configuration.html for detailed information on
     | how to configurigure caches in this file
     +-->
     
    <!-- Location of persistent caches on disk -->
    <diskStore path="java.io.tmpdir/uPortal" />
    
    <cacheManagerPeerProviderFactory
        class="net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory"
        properties="file=properties/jgroups.xml" />
    
    <defaultCache eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="600" memoryStoreEvictionPolicy="LRU" statistics="true" />

    <!-- ****************************************************************** -->
    <!-- ******************** uPortal Framework Caches ******************** -->
    <!-- ****************************************************************** -->
    
    <!-- 
     | Caches layout node id -> tab name resolutions done by the tab renderer aggregator
     | - not replicated
     +-->
    <cache name="org.jasig.portal.events.aggr.tabrender.TabRenderAggregator.layoutNodeIdNameResolver"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="300" memoryStoreEvictionPolicy="LRU" statistics="true" />
    
    <!-- 
     | Caches data scoped to an active EntityManager. Entries in this cache are short lived (duration of a thread of execution)
     | - not replicated
     +-->
    <cache name="org.jasig.portal.jpa.cache.EntityManagerCache"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>

    <!-- 
     | Caches if the user is a default user (generally only used during import/export)
     | - 1 x user
     | - not replicated
     +-->
    <cache name="org.jasig.portal.RDBMUserIdentityStore.isDefaultUser"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
        
    <!-- 
     | Caches user specific lock
     | - 1 x user
     | - not replicated
     +-->
    <cache name="org.jasig.portal.RDBMUserIdentityStore.userLockCache"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
    
    <!-- 
     | Caches Skin Resource instances
     | - 1 x skin
     | - not replicated - represents local file system data
     +-->
    <cache name="org.jasig.portal.web.skin.Resources"
        eternal="false" maxElementsInMemory="50" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
        
    <!-- 
     | Caches Skin Resource DocumentFragment instances, the XML chunk added to the <head>
     | - 1 x skin
     | - not replicated - represents local file system data
     +-->
    <cache name="org.jasig.portal.web.skin.Resources_DocumentFragment"
        eternal="false" maxElementsInMemory="50" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
    
    <!-- 
     | Caches AuthorizationPrincipalImpl instances
     | - 1 x user
     | - 1 x channel
     | - 1 x group
     | - not replicated - doesn't represent an updatable data store
     +-->
    <cache name="org.jasig.portal.security.provider.AuthorizationImpl.AUTH_PRINCIPAL_CACHE"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
    
    <!-- 
     | Caches containing group keys for a permissions target
     | 1 x group x group members
     | - not replicated - doesn't represent an updatable data store
     +-->
    <cache name="org.jasig.portal.security.provider.AuthorizationImpl.ENTITY_PARENTS_CACHE"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="60" memoryStoreEvictionPolicy="LRU" statistics="true" />
    
    <!-- 
     | Caches principal specific permission checks
     | 1 x principal x permission
     | - not replicated - doesn't represent an updatable data store
     +-->
    <cache name="org.jasig.portal.security.provider.AuthorizationImpl.PRINCIPAL_HAS_PERMISSION"
        eternal="false" maxElementsInMemory="50000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="60" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
    
    
    <!-- 
     | Caches fragment layouts
     | - 1 x fragment layout
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.layout.dlm.FragmentActivator.userViews"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>

        
    <!-- 
     | Caches exceptions from loading fragment layout
     | - 1 x fragment layout that fails to load
     | - not replicated
     +-->
    <cache name="org.jasig.portal.layout.dlm.FragmentActivator.userViewErrors"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="30" memoryStoreEvictionPolicy="LRU" statistics="true" />
        
     <!-- 
     | Caches node descriptor objects for fragment layouts
     | - 1 x fragment layout node
     | - not replicated
     +-->
    <cache name="org.jasig.portal.layout.dlm.RDBMDistributedLayoutStore.fragmentNodeInfoCache"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="300" memoryStoreEvictionPolicy="LRU" statistics="true" />
        
    <!-- 
     | Caches layout DOM
     | - 1 x user
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.layout.dlm.LAYOUT_CACHE"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="7200" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
        
    <!-- 
     | Caches layout node reference resolution, only used during import and export
     | - 1 x layout x dlm reference node
     | - not replicated - only used by a command line tool
     +-->
    <cache name="org.jasig.portal.layout.dlm.NODEREF_CACHE"
        eternal="false" maxElementsInMemory="2000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="180" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
        
    <!-- 
     | Caches resolved resource URLs
     | - 1 x classpath resource (framework XSL files and such)
     | - not replicated - pertains to local file system data
     +-->
    <cache name="org.jasig.portal.utils.ResourceLoader.RESOURCE_URL_CACHE"
        eternal="false" maxElementsInMemory="250" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
    
    <!-- 
     | Caches failed resource URL resolution
     | - 1 x classpath resource that does not exist (framework XSL files and such)
     | - not replicated - pertains to local file system data
     +-->
    <cache name="org.jasig.portal.utils.ResourceLoader.RESOURCE_URL_NOT_FOUND_CACHE"
        eternal="false" maxElementsInMemory="250" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="600" memoryStoreEvictionPolicy="LRU" statistics="true" />
        
    <!-- 
     | Caches parsed CPD files
     | - 1 x .cpd file
     | - not replicated - pertains to local file system data
     +-->
    <cache name="org.jasig.portal.portlets.portletadmin.PortletAdministrationHelper.CPD_CACHE"
        eternal="false" maxElementsInMemory="250" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
        
    <!-- 
     | Caches EntityType data
     | - 1 x Entity type
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.EntityTypes.CLASS_BY_ID"
        eternal="false" maxElementsInMemory="50" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.EntityTypes.ID_BY_CLASS"
        eternal="false" maxElementsInMemory="50" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.EntityTypes.ALL"
        eternal="false" maxElementsInMemory="1" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
        
        
    
    <!-- ******************** Per-Datasource Person Directory Caches ******************** -->
    <!-- 
     | Caches the final merge results of a person directory query, short cache to ensure the
     | individual attribute source caches are honored
     | - 1 x user
     | - not replicated - doesn't represent an updatable data store
     +-->
    <cache name="org.jasig.services.persondir.USER_INFO.merged"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="30" timeToLiveSeconds="60" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
        
    <!-- 
     | Caches queries against the local UP_USER table
     | - 1 x user
     | - not replicated - doesn't represent an updatable data store
     +-->
    <cache name="org.jasig.services.persondir.USER_INFO.up_user"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
        
        

    <!-- ******************** uPortal IBasicEntity Caches ******************** -->

    <!-- 
     | Caches IEntityGroup objects
     | - 1 x group across all group stores
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.groups.IEntityGroup"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    
    <!-- 
     | Caches IEntity objects
     | - 1 x group member (channels, users)
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.groups.IEntity"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    
    <!-- 
     | Caches IPermissionSet objects
     | - 1 x per permissions owner (channel manager, user, ...)
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.security.IPermissionSet"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
        

     
    <!-- 
     | Caches output from portlets rendering in the HEADER part of the render request
     | - 1 per portlet cached header rendering see PrivatePortletCacheKey for the key definition
     +-->   
    <cache name="org.jasig.portal.portlet.container.cache.PortletCacheControlServiceImpl.privateScopePortletRenderHeaderOutputCache"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
        
    <!-- 
     | Caches output from portlets rendering in the MARKUP part of the render request
     | - 1 per portlet cached rendering see PrivatePortletCacheKey for the key definition
     +-->   
    <cache name="org.jasig.portal.portlet.container.cache.PortletCacheControlServiceImpl.privateScopePortletRenderOutputCache"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
        
    <!-- 
     | Caches output from portlets serving resources
     | - 1 per portlet cached resource response see PrivatePortletCacheKey for the key definition
     +-->   
    <cache name="org.jasig.portal.portlet.container.cache.PortletCacheControlServiceImpl.privateScopePortletResourceOutputCache"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
        
    <!-- 
     | Caches PUBLIC output from portlets rendering in the HEADER part of the render request
     | - 1 per portlet cached header rendering see PublicPortletCacheKey for the key definition
     +-->   
    <cache name="org.jasig.portal.portlet.container.cache.PortletCacheControlServiceImpl.publicScopePortletRenderHeaderOutputCache"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
        
    <!-- 
     | Caches PUBLIC output from portlets rendering in the MARKUP part of the render request
     | - 1 per portlet cached rendering see PublicPortletCacheKey for the key definition
     +-->   
    <cache name="org.jasig.portal.portlet.container.cache.PortletCacheControlServiceImpl.publicScopePortletRenderOutputCache"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
        
    <!-- 
     | Caches PUBLIC output from portlets serving resources
     | - 1 per portlet cached header response response see PublicPortletCacheKey for the key definition
     +-->   
    <cache name="org.jasig.portal.portlet.container.cache.PortletCacheControlServiceImpl.publicScopePortletResourceOutputCache"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory class="org.jasig.portal.utils.cache.SpringCacheEventListenerFactory" properties="beanName=tagTrackingCacheEventListener" listenFor="local" />
    </cache>
        

    <!-- 
     | Caches parsing entity id strings into entity ids
     | - 1 x subscribed portlet x user
     | - not replicated
     +-->
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletEntityImpl.idParseCache"
        eternal="false" maxElementsInMemory="15000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="60" memoryStoreEvictionPolicy="LRU" statistics="true" />

        
    <!-- Portal javascript and css gzipping filter cache -->

    <cache name="org.jasig.portal.utils.cache.ConfigurablePageCachingFilter.PAGE_CACHE"
        eternal="false" maxElementsInMemory="250" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
    
    <!-- XSLT caches -->
    <!-- 
     | Note: overflowToDisk MUST be false for XSLT caches as these caches store "javax.xml.transform.Templates" or
     | "org.jasig.portal.StylesheetSet" instances which are not Serializable
     +-->
    <cache name="org.jasig.portal.utils.cache.resource.CachingResourceLoader"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />

    <!-- 
     | Caches compiled SpEL Expression objects
     | - 1 x expression used in the portal
     | - not replicated
     +-->
    <cache name="SpELExpressionCache"
        eternal="false" maxElementsInMemory="5000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />

    <!-- 
     | Caches post-layout pipeline events
     | - 1 x user x navigational state
     | - not replicated
     +-->
    <cache name="org.jasig.portal.rendering.STRUCTURE_TRANSFORM"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />

    <!-- 
     | Caches post-layout pipeline events
     | - 1 x user x navigational state
     | - not replicated
     +-->
    <cache name="org.jasig.portal.rendering.THEME_TRANSFORM"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
            
    <!-- 
     | Caches resolution of events that are supported by the portlet deployment 
     | - 1 x portlet deployment x portlet event
     +-->
    <cache name="org.jasig.portal.portlet.rendering.SupportedEventCache"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
    
    


    <!-- *********************************************************** -->
    <!-- ***************** Portal Hibernate Caches ***************** -->
    <!-- *********************************************************** -->     
    
    <!-- 
     | Caches last updated timestamp for each hibernate managed table
     | - 1 x hibernate managed table
     | - not replicated - used to track local modifications to tables
     +-->
    <cache name="org.hibernate.cache.spi.UpdateTimestampsCache"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" />
    <!-- 
     | Caches SQL query level results for entity queries that don't specify an explicit cache region
     | - 1 x managed query result
     | - not replicated - used to track local query results
     +-->
    <cache name="org.hibernate.cache.internal.StandardQueryCache"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="300" memoryStoreEvictionPolicy="LRU" statistics="true" />
    
    <!-- Only ID Cached -->
    <cache name="org.jasig.portal.concurrency.locking.ClusterMutex##NaturalId"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.version.dao.jpa.VersionImpl##NaturalId"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
        
    <!-- 
     | Caches UserFragmentSubscriptions
     | - 1 per fragment subscription per user
     +-->
    <cache name="org.jasig.portal.fragment.subscribe.dao.jpa.UserFragmentSubscriptionImpl"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.fragment.subscribe.dao.jpa.UserFragmentSubscriptionImpl.Query"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
        
    <!--
     | Caches message
     | - 1 per each translated message (max = messages * supported locales)
     +-->
    <cache name="org.jasig.portal.i18n.dao.jpa.MessageImpl" 
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false"
        timeToIdleSeconds="60" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.i18n.dao.jpa.MessageImpl.Query" 
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false"
        timeToIdleSeconds="60" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true">
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
            
    <!-- 
     | Caches StylesheetDescriptor 
     | - 1 per stylesheet used in the rendering pipeline
     +-->
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetDescriptorImpl"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetDescriptorImpl##NaturalId"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetDescriptorImpl.Query"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetDescriptorImpl.outputProperties"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetDescriptorImpl.stylesheetParameters"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetDescriptorImpl.layoutAttributes"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="300" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>

    <!-- 
     | Caches StylesheetUserPreferences
     | - 1 per customization per user
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetUserPreferencesImpl"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetUserPreferencesImpl.Query"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetUserPreferencesImpl.layoutAttributes"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetUserPreferencesImpl.outputProperties"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetUserPreferencesImpl.parameters"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.OutputPropertyDescriptorImpl"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.StylesheetParameterDescriptorImpl"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.LayoutNodeAttributesImpl"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.LayoutNodeAttributesImpl.attributes"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.LayoutAttributeDescriptorImpl"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dao.jpa.LayoutAttributeDescriptorImpl.targetElementNames"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="3600" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    
    <!-- 
     | Caches DLM Evaluator object
     | - 1 x per DLM layout fragment
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.layout.dlm.Evaluator"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.FragmentDefinition.evaluators"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.FragmentDefinition.Query"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.providers.Paren.evaluators"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.providers.EvaluatorGroup.evaluators"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.providers.AllUsersEvaluatorFactory"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.providers.AttributeEvaluator"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.providers.GroupMembershipEvaluator"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.providers.GuestUserEvaluatorFactory"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.providers.ProfileEvaluator"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.layout.dlm.providers.SubscribedTabEvaluator"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
        
    <!-- 
     | Caches PermissionOwner objects
     | - 1 x permission owner type
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.permission.dao.jpa.PermissionOwnerImpl"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.permission.dao.jpa.PermissionOwnerImpl##NaturalId"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.permission.dao.jpa.PermissionOwnerImpl.Query"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.permission.dao.jpa.PermissionOwnerImpl.activities"
        eternal="false" maxElementsInMemory="100" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.permission.dao.jpa.PermissionActivityImpl"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
        
    <!-- 
     | Caches local users
     | - 1 x local user
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.persondir.dao.jpa.LocalAccountPersonImpl"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.persondir.dao.jpa.LocalAccountPersonImpl.Query"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.persondir.dao.jpa.LocalAccountPersonImpl.attributes"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.persondir.dao.jpa.LocalAccountPersonAttributeImpl"
        eternal="false" maxElementsInMemory="5000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.persondir.dao.jpa.LocalAccountPersonAttributeImpl.values"
        eternal="false" maxElementsInMemory="500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>

    <!-- 
     | Caches PortalCookieImpl objects
     | - 1 per "customer" per "year" (by default, or until they clear their cookies)
     +-->   
    <cache name="org.jasig.portal.portlet.dao.jpa.PortalCookieImpl"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="900" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortalCookieImpl##NaturalId"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortalCookieImpl.Query"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="900" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortalCookieImpl.portletCookies"
        eternal="false" maxElementsInMemory="2500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="900" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletCookieImpl"
        eternal="false" maxElementsInMemory="25000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="900" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>

    <!-- 
     | Caches PortletDefinitionImpl objects
     | - 1 x published portlet
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletDefinitionImpl"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LFU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletDefinitionImpl##NaturalId"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LFU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletDefinitionImpl.Query"
        eternal="false" maxElementsInMemory="1000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LFU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletDefinitionImpl.localizations"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LFU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletDefinitionImpl.parameters"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LFU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletDefinitionParameterImpl"
        eternal="false" maxElementsInMemory="10000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LFU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    
    <!-- 
     | Caches PortletEntityImpl objects
     | - 1 x subscribed portlet x user
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletEntityImpl"
        eternal="false" maxElementsInMemory="15000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletEntityImpl.Query"
        eternal="false" maxElementsInMemory="1500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletEntityImpl.windowStates"
        eternal="false" maxElementsInMemory="15000" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    
    <!-- 
     | Caches PortletPreferencesImpl objects
     | - 1 x subscribed portlet x user
     | - 1 x published portlet
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletPreferencesImpl"
        eternal="false" maxElementsInMemory="15500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletPreferencesImpl.portletPreferences"
        eternal="false" maxElementsInMemory="15500" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletPreferenceImpl"
        eternal="false" maxElementsInMemory="2200" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletPreferenceImpl.values"
        eternal="false" maxElementsInMemory="2200" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="900" timeToLiveSeconds="1800" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
        
    <!-- 
     | Caches PortletType objects
     | - 1 x channel type
     | - replicated by invalidation
     +-->
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletTypeImpl"
        eternal="false" maxElementsInMemory="250" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletTypeImpl##NaturalId"
        eternal="false" maxElementsInMemory="250" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="0" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    <cache name="org.jasig.portal.portlet.dao.jpa.PortletTypeImpl.Query"
        eternal="false" maxElementsInMemory="250" overflowToDisk="false" diskPersistent="false" 
        timeToIdleSeconds="0" timeToLiveSeconds="21600" memoryStoreEvictionPolicy="LRU" statistics="true" >
        <cacheEventListenerFactory
            class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
            properties="replicateAsynchronously=true, 
                replicatePuts=false,
                replicateUpdates=true, replicateUpdatesViaCopy=false,
                replicateRemovals=true "/>
    </cache>
    

</ehcache>
